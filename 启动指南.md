# 运动助手 - 启动指南

## 系统功能更新说明

我们已经更新了系统，添加了以下功能：

1. **Web Bluetooth API支持**：尝试检测附近的真实心率监测设备
2. **设备交互界面**：用户可以手动选择和连接心率设备
3. **增强的实时数据处理**：更完善的WebSocket通信机制
4. **状态通知功能**：设备连接状态变化时提供实时通知
5. **心率数据可视化**：根据心率值变化显示不同颜色提示
6. **运动状态监测**：跟踪用户的运动状态、速度和距离
7. **位置定位功能**：显示具体位置和经纬度信息

## 手动启动步骤

如果自动启动脚本无法运行，请按照以下步骤手动启动应用程序：

### 1. 确保Node.js已正确安装

在命令提示符或PowerShell中运行以下命令，确认Node.js已安装：

```bash
node -v
npm -v
```

如果命令未被识别，请从[Node.js官网](https://nodejs.org/)下载并安装最新版本。

### 2. 安装后端依赖

```bash
# 进入后端目录
cd backend

# 安装依赖
npm install
```

### 3. 配置环境变量

确保`backend`目录下有`.env`文件，内容如下：

```
MONGO_URI=mongodb://localhost:27017/heart_rate_monitor
PORT=3000
WS_PORT=8080
JWT_SECRET=your_jwt_secret_key
JWT_EXPIRES_IN=24h
```

如果没有此文件，请创建一个。

### 4. 启动后端服务

```bash
# 在backend目录下运行
node server.js
```

### 5. 访问前端页面

打开浏览器，直接访问以下文件：

```
c:\Users\yangh\Desktop\心率广播\frontend\index.html
```

## 使用说明

1. **注册/登录**：使用任意用户名和密码创建账户
2. **扫描设备**：点击"扫描心率设备"按钮查找附近的设备
3. **连接设备**：在设备列表中选择一个设备并点击"连接"按钮
4. **开始运动**：点击"开始运动"按钮启动运动监测和位置跟踪
5. **查看数据**：实时查看心率数据、运动状态、速度、距离和位置信息

## 注意事项

1. Web Bluetooth API在某些浏览器中可能需要HTTPS或localhost环境
2. 如果无法检测到真实设备，系统会自动切换到模拟数据模式
3. 为了获得最佳体验，请使用Chrome、Edge或Opera等支持Web Bluetooth的浏览器

## 故障排除

- **无法连接设备**：确保蓝牙已开启，设备在有效范围内
- **数据不更新**：检查WebSocket连接状态，确保后端服务正在运行
- **无法登录**：确保后端服务正常启动，端口3000未被占用